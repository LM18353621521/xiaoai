{if condition ="strtolower(request()->action()) == 'statistics'"}
<!--数据统计-->
<div id="container1"></div>
<div id="container2"></div>
<script>
    var time = '{$time}';
    var dataList = '{$dataList}';
    var title = '{$title}'; //标题
    var subtitle = '{$subtitle}'; //副标题
    var ytext = '{$ytext}'; //y轴显示文字
    var label = {
        rotation: -45, //字体倾斜
        align: 'right',
        style: {font: 'normal 13px 宋体'} //x轴文字显示样式
    };
    time = eval(time);
    dataList = eval(dataList);
    $(document).ready(function () {
        $('div[id*=container]').html('');
        if ($('select[name=chart_type]').val() == 'container1') {
            brokenLine();
        } else {
            column();
        }
        $('select[name=chart_type]').change(function () {
            $('div[id*=container]').html('');
            if ($('select[name=chart_type]').val() == 'container1') {
                brokenLine();
            } else {
                column();
            }
        });
        function brokenLine() {
            //折线图
            new Highcharts.Chart({
                chart: {
                    renderTo: 'container1',          //放置图表的容器
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    defaultSeriesType: 'line'
                },
                title: {
                    text: title
                },
                subtitle: {
                    text: subtitle
                },
                //X轴数据
                xAxis: {
                    categories: time,
                    labels: label
                },
                //Y轴显示文字
                yAxis: {
                    title: {
                        text: ytext
                    }
                },
                tooltip: {
                    enabled: true,
                    formatter: function () {
                        return '<b>' + this.x + '</b><br/>' + this.series.name + ': ' + Highcharts.numberFormat(this.y, 1);
                    }
                },
                plotOptions: {
                    line: {
                        dataLabels: {
                            enabled: true
                        },
                        enableMouseTracking: true//是否显示title
                    }
                },
                series: dataList
            });
        }

        function column() {
            //柱状图
            new Highcharts.Chart({
                chart: {
                    renderTo: 'container2',          //放置图表的容器
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    defaultSeriesType: 'column'   //图表类型line, spline, area, areaspline, column, bar, pie , scatter
                },
                title: {
                    text: title
                },
                subtitle: {
                    text: subtitle
                },
                //X轴数据
                xAxis: {
                    categories: time,
                    labels: label
                },
                //Y轴显示文字
                yAxis: {
                    title: {
                        text: ytext
                    }
                },
                tooltip: {
                    enabled: true,
                    formatter: function () {
                        return '<b>' + this.x + '</b><br/>' + this.series.name + ': ' + Highcharts.numberFormat(this.y, 1);
                    }
                },
                plotOptions: {
                    column: {
                        dataLabels: {
                            enabled: true
                        },
                        enableMouseTracking: true//是否显示title
                    }
                },
                series: dataList
            });
        }
    });
</script>
{/if}